<!DOCTYPE html>
<html lang="en">
  




<head>
	<meta charset="utf-8">
	<title>[Udacity] Computer Vision (2) - Camera Calibration - Refstop의 연구일지</title>
	<link rel="canonical" href="https://Refstop.github.io/uda-cv-cam-cali.html">
	<meta name="description" content="Deep Learning 및 SLAM을 공부하고 있습니다.">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://Refstop.github.io"},
  "headline": "[Udacity] Computer Vision (2) - Camera Calibration",
  "abstract": "",
    "keywords": "Udacity, Computer Vision",
    "wordcount": "1824",
    "image": ["https://Refstop.github.io/assets/img"],
  "datePublished": "2021-01-23 15:25:23 +0900",
  "dateModified": "2021-01-23 15:25:23 +0900",
  "author": {
    "@type": "Person",
    "name": ""},
  "publisher": {
    "@type":  "Organization",
    "logo": {
        "@type": "ImageObject",
        "encodingFormat": "image/png",
        "contentUrl": "https://Refstop.github.io/assets/img/branding/MVM-symbol-black.png",
        "url": "https://Refstop.github.io/assets/img/branding/MVM-symbol-black.png"},
    "name" : "Refstop의 연구일지"}
}
</script>
<!-- Open Graph data -->
<meta property="og:url" content="https://Refstop.github.io/uda-cv-cam-cali.html"/>
<meta property="og:type" content="article"/>
<meta property="og:title" content="[Udacity] Computer Vision (2) - Camera Calibration"/>
<meta property="og:description" content=""/>
<meta property="og:image" content="https://Refstop.github.io/assets/img"/>
<meta property="og:image:alt" content="[Udacity] Computer Vision (2) - Camera Calibration"/>
<meta property="og:site_name" content="Refstop의 연구일지" />
<meta property="article:published_time" content="2021-01-23 15:25:23 +0900" />
<meta property="article:modified_time" content="2021-01-23 15:25:23 +0900" />
<meta property="article:tag" content="Udacity, Computer Vision" />
<meta property="fb:admins" content="ar.maybach" />
<!-- Schema.org markup for Google -->
<meta itemprop="name" content="[Udacity] Computer Vision (2) - Camera Calibration">
<meta itemprop="description" content="">
<meta itemprop="image" content="https://Refstop.github.io/assets/img">
<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@MvmThe">
<meta name="twitter:title" content="[Udacity] Computer Vision (2) - Camera Calibration">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="">
<meta data-rh="true" name="twitter:label1" content="Word count"/>
<meta data-rh="true" name="twitter:data1" content="1824"/>
<meta name="twitter:image:src" content="https://Refstop.github.io/assets/img/">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#311e3e">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#311e3e">
	<!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.gstatic.com" />
	<style>
/* latin */
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/lora/v17/0QIvMX1D_JOuMwr7I_FMl_E.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  src: url(https://fonts.gstatic.com/s/lora/v17/0QIvMX1D_JOuMwr7I_FMl_E.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 200;
  src: url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xKydSBYKcSV-LCoeQqfX1RYOo3i94_wlxdu3cOWxw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7lujVj9w.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
/* latin */
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 700;
  src: url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xKydSBYKcSV-LCoeQqfX1RYOo3ig4vwlxdu3cOWxw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
	</style>
	<!-- <link href="https://fonts.googleapis.com/css?family=Lora:400,600|Source+Sans+Pro:200,400,700" rel="stylesheet"> -->
	<!-- Font Awesome -->
	<link rel="stylesheet" href="./assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="./assets/css/main.css">
	




<link rel="icon" href="./assets/img/favicon/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="./assets/img/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="72x72" href="./assets/img/favicon/favicon.ico">
<link rel="apple-touch-icon" sizes="114x114" href="./assets/img/favicon/favicon.ico">
	
	<link rel="stylesheet" href="./assets/css/highlighter/syntax-base16.monokai.dark.css">
	
</head>

  <body>
    




<section class="hidden">
  <div class="post">
      <a  class="post-list-title" href="./uda-cv-cam-cali.html">[Udacity] Computer Vision (2) - Camera Calibration</a>
      

  <span class = "post-card-meta">
  
  
    <span class="meta-pre"></span>
  
  
    
      
      <span class="page_meta-date">
        <time datetime="2021-01-23T15:25:23+09:00">January 23, 2021</time>
      </span>
    
    
      <span class="meta-sep"></span>
    
  
  
    
    
    <span class="page_meta-readtime">
      
        9 minute read
      
    </span>
  
  
  </span>

        <div class="post-excerpt">
            <h1 id="제대로-된-이미지로-보정하기">제대로 된 이미지로 보정하기</h1><p>컴퓨터 비전에서 사용하는 센서 중 가장 중요한 것은 단연코 카메라입니다. 이미지 처리가 주된 내용인 만큼 카메라가 감지하는 정보는 높은 정확도를 요구합니다. 하지만 공장에서 만들어지기만 한 카메라를 바로 사용하기에는 문제가 있습니다. 내부 파라미터 조정이나 렌즈에 의한 왜곡 등이 아직 보정되지 않았기에 왜곡된 이미지가 출력될 수 있습니다. 이러한 상태의 카메라의 이미지를 보정하는 과정은 다음과 같습니다.</p><ol> <li>카메라 캘리브레이션(Camera Calibration)</li> <li>왜곡 교정 (Distortion Correction)</li> <li>원근 변환 (Perspective Transform)</li></ol><p>사실 원근 변환은 이미지를 보정하는 과정보다는 가공하는 과정에 가깝지만 이번 강의에서 소개해주는 김에 다루도록 하겠습니다.</p><h1 id="카메라-캘리브레이션-camera-calibration">카메라 캘리브레이션 (Camera Calibration)</h1><p>카메라 캘리브레이션은 간단히 말하면 3차원의 형상을 2차원으로 온전히 옮길 수 있도록 도와주는 파라미터들을 도출하는 과정입니다.카메라...<a class="read-more" href="./uda-cv-cam-cali.html"> read more</a>
        </div>
  </div>
</section>
<div class="flex-container transparent">
  




<header class="main-header">
  <div class="wrapper">
    <div class="header-flex">
      <div class="menu-icon-container">
        <span class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></span>
      </div>
      <nav class="main-nav">
        <span class="menu-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        <ul>
          <li>
            <div class="theme-toggle night">
    <input class="night" type="checkbox" id="theme-switch">
    <label class="night" for="theme-switch">
        <div class="toggle night"></div>
        <div class="names night">             
        <p class="light night"><svg class="night" width="20" viewBox="0 0 25 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path class="night" d="M12.5 2.49871C11.3401 2.50016 10.2282 2.96156 9.40801 3.78171C8.58785 4.60187 8.12645 5.71383 8.125 6.87371C8.125 7.03947 8.19085 7.19844 8.30806 7.31565C8.42527 7.43286 8.58424 7.49871 8.75 7.49871C8.91576 7.49871 9.07473 7.43286 9.19194 7.31565C9.30915 7.19844 9.375 7.03947 9.375 6.87371C9.37593 6.04519 9.70547 5.25088 10.2913 4.66503C10.8772 4.07918 11.6715 3.74964 12.5 3.74871C12.6658 3.74871 12.8247 3.68286 12.9419 3.56565C13.0592 3.44844 13.125 3.28947 13.125 3.12371C13.125 2.95795 13.0592 2.79898 12.9419 2.68177C12.8247 2.56456 12.6658 2.49871 12.5 2.49871V2.49871ZM12.5 -0.00129131C8.47891 -0.00129131 5.62031 3.26238 5.625 6.88269C5.62487 8.54403 6.22974 10.1486 7.32656 11.3964C8.32891 12.5378 9.29062 14.4007 9.375 14.9987L9.37734 17.9358C9.37744 18.0587 9.41402 18.1787 9.48242 18.2807L10.4395 19.7198C10.4964 19.8055 10.5737 19.8758 10.6644 19.9245C10.7551 19.9731 10.8564 19.9986 10.9594 19.9987H14.0395C14.1426 19.9988 14.2441 19.9734 14.3351 19.9247C14.426 19.8761 14.5034 19.8057 14.5605 19.7198L15.5176 18.28C15.5854 18.1776 15.6219 18.0578 15.6227 17.935L15.625 14.9987C15.7129 14.3846 16.6797 12.5303 17.6734 11.3964C18.5434 10.4028 19.1087 9.17963 19.3015 7.87318C19.4944 6.56673 19.3066 5.23238 18.7608 4.02985C18.215 2.82732 17.3342 1.80757 16.2238 1.09264C15.1135 0.377721 13.8206 -0.00207746 12.5 -0.00129131V-0.00129131ZM14.3727 17.7452L13.7047 18.7487H11.2937L10.6273 17.7452V17.4987H14.3738L14.3727 17.7452ZM14.375 16.2487H10.625L10.6227 14.9987H14.375V16.2487ZM16.7348 10.5725C16.1879 11.1956 15.316 12.4511 14.7594 13.7479H10.243C9.68516 12.4507 8.81328 11.1956 8.26641 10.5725C7.36971 9.5491 6.87599 8.2344 6.87734 6.87371C6.87031 3.8659 9.23594 1.24871 12.5 1.24871C15.602 1.24871 18.125 3.77176 18.125 6.87371C18.1249 8.23456 17.6305 9.54904 16.7336 10.5725H16.7348ZM3.75 6.87371C3.75 6.70795 3.68415 6.54898 3.56694 6.43177C3.44973 6.31456 3.29076 6.24871 3.125 6.24871H0.625C0.45924 6.24871 0.300269 6.31456 0.183058 6.43177C0.065848 6.54898 0 6.70795 0 6.87371C0 7.03947 0.065848 7.19844 0.183058 7.31565C0.300269 7.43286 0.45924 7.49871 0.625 7.49871H3.125C3.29076 7.49871 3.44973 7.43286 3.56694 7.31565C3.68415 7.19844 3.75 7.03947 3.75 6.87371ZM20.625 2.49871C20.7221 2.49849 20.8178 2.4759 20.9047 2.43269L23.4047 1.18269C23.5529 1.10852 23.6657 0.978483 23.718 0.821201C23.7704 0.66392 23.7582 0.492273 23.684 0.344021C23.6473 0.270614 23.5964 0.205161 23.5344 0.151397C23.4724 0.0976336 23.4004 0.0566132 23.3225 0.0306781C23.1652 -0.0217002 22.9936 -0.00945342 22.8453 0.0647243L20.3453 1.31472C20.2194 1.37771 20.1184 1.48136 20.0588 1.60889C19.9991 1.73643 19.9843 1.88037 20.0166 2.0174C20.049 2.15442 20.1267 2.2765 20.2371 2.36386C20.3475 2.45122 20.4842 2.49873 20.625 2.49871ZM24.375 6.24871H21.875C21.7092 6.24871 21.5503 6.31456 21.4331 6.43177C21.3158 6.54898 21.25 6.70795 21.25 6.87371C21.25 7.03947 21.3158 7.19844 21.4331 7.31565C21.5503 7.43286 21.7092 7.49871 21.875 7.49871H24.375C24.5408 7.49871 24.6997 7.43286 24.8169 7.31565C24.9342 7.19844 25 7.03947 25 6.87371C25 6.70795 24.9342 6.54898 24.8169 6.43177C24.6997 6.31456 24.5408 6.24871 24.375 6.24871ZM4.65469 1.31472L2.15469 0.0647243C2.08128 0.0279952 2.00136 0.00608435 1.91948 0.00024269C1.83761 -0.00559897 1.75539 0.004743 1.67751 0.0306781C1.52023 0.0830564 1.39019 0.195769 1.31602 0.344021C1.24184 0.492273 1.22959 0.66392 1.28197 0.821201C1.33435 0.978483 1.44706 1.10852 1.59531 1.18269L4.09531 2.43269C4.18223 2.4759 4.27794 2.49849 4.375 2.49871C4.5158 2.49873 4.65248 2.45122 4.7629 2.36386C4.87332 2.2765 4.951 2.15442 4.98337 2.0174C5.01574 1.88037 5.0009 1.73643 4.94124 1.60889C4.88158 1.48136 4.78061 1.37771 4.65469 1.31472ZM23.4047 12.5647L20.9047 11.3147C20.7564 11.2405 20.5847 11.2283 20.4274 11.2807C20.2701 11.3332 20.14 11.4459 20.0658 11.5942C19.9916 11.7425 19.9794 11.9142 20.0318 12.0715C20.0842 12.2289 20.197 12.3589 20.3453 12.4331L22.8453 13.6831C22.9936 13.7573 23.1653 13.7695 23.3226 13.7171C23.4799 13.6647 23.61 13.5519 23.6842 13.4036C23.7584 13.2553 23.7706 13.0836 23.7182 12.9263C23.6658 12.769 23.553 12.6389 23.4047 12.5647V12.5647ZM4.375 11.2487C4.27794 11.2489 4.18223 11.2715 4.09531 11.3147L1.59531 12.5647C1.44701 12.6389 1.33425 12.769 1.28183 12.9263C1.25588 13.0042 1.24552 13.0864 1.25135 13.1683C1.25719 13.2502 1.27909 13.3302 1.31582 13.4036C1.35255 13.477 1.40338 13.5425 1.46542 13.5963C1.52745 13.6501 1.59947 13.6911 1.67737 13.7171C1.83469 13.7695 2.00638 13.7573 2.15469 13.6831L4.65469 12.4331C4.78083 12.3702 4.88202 12.2666 4.94183 12.1389C5.00164 12.0113 5.01656 11.8672 4.98417 11.7301C4.95178 11.5929 4.87397 11.4707 4.76339 11.3833C4.65281 11.2959 4.51594 11.2485 4.375 11.2487V11.2487Z" /></svg></p>
        <p class="dark night"><svg class="night" width="20" viewBox="0 0 25 21" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path class="night" d="M6.39614 3.72646C7.50591 1.56178 9.72622 0.00900831 12.4782 0.00114817C13.8006 -0.00388798 15.0965 0.375153 16.2101 1.09278C17.3237 1.8104 18.2079 2.83612 18.7564 4.04682C19.3049 5.25751 19.4945 6.60175 19.3024 7.91818C19.1103 9.23461 18.5447 10.4673 17.6735 11.4683C17.5227 11.6416 17.3516 11.859 17.1739 12.1069L9.47856 6.12184C9.65443 5.45016 10.046 4.85578 10.5924 4.43118C11.1387 4.00657 11.8093 3.77554 12.4997 3.77401C12.6654 3.77401 12.8244 3.70776 12.9416 3.58984C13.0588 3.47191 13.1247 3.31197 13.1247 3.1452C13.1247 2.97843 13.0588 2.81849 12.9416 2.70057C12.8244 2.58264 12.6654 2.51639 12.4997 2.51639C11.6212 2.5173 10.7634 2.78383 10.0374 3.28141C9.31146 3.77899 8.75092 4.48463 8.42856 5.30674L6.39614 3.72646ZM6.39614 10.0841C6.64968 10.5817 6.96225 11.0465 7.327 11.4683C7.97231 12.2091 8.98169 13.7568 9.36645 15.0624C9.36645 15.0726 9.36919 15.0828 9.37075 15.093H12.8372L6.39614 10.0841ZM9.37466 16.3502V17.8574C9.37584 18.1045 9.44934 18.3458 9.58599 18.5511L10.2536 19.5607C10.3675 19.7335 10.5221 19.8753 10.7037 19.9734C10.8852 20.0715 11.0881 20.1229 11.2942 20.1231H13.7047C13.9107 20.1231 14.1135 20.0718 14.2951 19.9739C14.4766 19.876 14.6313 19.7345 14.7454 19.5619L15.4129 18.5511C15.5492 18.3451 15.622 18.1033 15.6223 17.8558V17.2581L14.4528 16.3502H9.37466Z"/>
            <path class="night" d="M0.131556 1.2363L0.898352 0.243172C0.948738 0.177883 1.01142 0.123229 1.08282 0.0823368C1.15423 0.0414448 1.23294 0.0151171 1.31446 0.00486006C1.39598 -0.00539702 1.47872 0.000617709 1.55793 0.0225602C1.63714 0.0445026 1.71127 0.0819422 1.77609 0.132737L24.7585 18.0039C24.8894 18.1062 24.9745 18.2567 24.9952 18.4221C25.0158 18.5876 24.9703 18.7545 24.8687 18.8862L24.1015 19.8794C24.0511 19.9446 23.9884 19.9992 23.917 20.0401C23.8457 20.0809 23.767 20.1072 23.6855 20.1175C23.6041 20.1277 23.5214 20.1217 23.4422 20.0998C23.363 20.0779 23.2889 20.0405 23.2241 19.9898L0.241322 2.1186C0.110489 2.01624 0.0254259 1.86578 0.00484145 1.70032C-0.015743 1.53486 0.0298368 1.36795 0.131556 1.2363V1.2363Z"/>
            </svg></p>
        </div>
    </label>
</div>
          </li>
          <li>
            <a href="./">
              <div class="left">
                Home
              </div>  
              <div class="right">
                <svg width="24px" aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g><rect x="83.534" y="40.929" width="3.997" height="20.071"/></g><path d="M16.466,41.931l33.548-25.123L92.81,48.877l2.396-3.198L50.015,11.814L4.794,45.679l2.396,3.199l5.279-3.954v42.763h75.062  V61h-3.997v22.69H64.598V54.068H35.402V83.69H16.466V41.931z M39.399,58.065h21.202V83.69H39.399V58.065z"/></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./archive.html">
              <div class="left">
                All Posts
              </div>
              <div class="right">
                <svg width="24px" aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="-3 3 64 64"><g><path d="M60.992,31.985c0-15.979-13-28.978-28.979-28.978c-15.994,0-29.006,12.999-29.006,28.978   c0,15.994,13.012,29.007,29.006,29.007v-2c-14.891,0-27.006-12.115-27.006-27.007c0-14.875,12.115-26.978,27.006-26.978   c14.876,0,26.979,12.103,26.979,26.978c0,8.945-4.479,17.329-11.804,22.338l0.874-10.062l-1.992-0.174l-1.135,13.071l13.042,1.136   l0.174-1.992l-9.183-0.799C56.443,50.079,60.992,41.321,60.992,31.985z"/><polygon points="33.014,12.682 31.014,12.682 31.014,32.398 39.811,41.224 41.227,39.812 33.014,31.572  "/></g></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./tags.html">
              <div class="left">
                Tags
              </div>
              <div class="right">
                <svg width="24px" aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g><path d="M75.244,15.066c-2.59,0-5.027,1.012-6.857,2.843c-3.781,3.785-3.778,9.94,0.002,13.724    c1.831,1.833,4.266,2.843,6.857,2.843s5.026-1.01,6.861-2.843c3.781-3.785,3.781-9.943-0.002-13.724    C80.275,16.076,77.838,15.066,75.244,15.066z M78.766,28.252c-1.871,1.869-5.129,1.869-6.996,0c-1.929-1.931-1.931-5.069-0.002-7    c0.934-0.934,2.175-1.448,3.498-1.448c1.322,0,2.564,0.515,3.5,1.448C80.691,23.183,80.691,26.321,78.766,28.252z M94.632,41.027    l0.005-28.872c0-3.745-3.05-6.792-6.792-6.792L58.973,5.368l-1.237-0.004c-1.893,0-4.75,0-6.617,1.869L7.008,51.342    c-1.06,1.059-1.645,2.467-1.645,3.966s0.583,2.908,1.644,3.968l33.717,33.717c1.058,1.06,2.467,1.645,3.966,1.645    s2.908-0.585,3.968-1.645l44.106-44.111c1.893-1.886,1.88-4.604,1.869-7.227L94.632,41.027z M90.022,46.139L45.913,90.25    c-0.654,0.65-1.792,0.652-2.443,0L9.752,56.532c-0.328-0.327-0.507-0.762-0.507-1.225c0-0.462,0.18-0.894,0.507-1.221    L53.861,9.976c0.676-0.674,2.284-0.731,3.874-0.731l1.237,0.004l28.872-0.004c1.604,0,2.909,1.306,2.909,2.911l-0.005,28.872    l0.005,0.642C90.76,43.585,90.769,45.392,90.022,46.139z"/></g></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./about.html">
              <div class="left">
                About
              </div>
              <div class="right">
                <svg width='24px' aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 846.66 846.66"><g><path d="M351.26 453.22c-276.42,134.06 -224.86,336.22 -224.73,336.8 6.03,25.41 -32.58,34.56 -38.6,9.15 -0.15,-0.65 -55.78,-219.32 218.87,-367.66 -60.98,-39 -100.02,-106.82 -100.02,-182.56 0,-119.6 96.95,-216.55 216.55,-216.55 119.6,0 216.55,96.95 216.55,216.55 0,75.74 -39.04,143.56 -100.02,182.56 274.65,148.34 219.02,367.01 218.87,367.66 -6.02,25.41 -44.63,16.26 -38.6,-9.15 0.13,-0.58 51.69,-202.74 -224.73,-336.8 -22.55,7.96 -46.8,12.29 -72.07,12.29 -25.27,0 -49.52,-4.33 -72.07,-12.29zm72.07 -381.14c-97.68,0 -176.87,79.19 -176.87,176.87 0,97.69 79.19,176.87 176.87,176.87 97.68,0 176.87,-79.18 176.87,-176.87 0,-97.68 -79.19,-176.87 -176.87,-176.87z"/></g></svg>
              </div>
            </a>
          </li>
          <li>
            <a href="./feed.xml">
              <div class="left">
                Atom feed
              </div>
              <div class="right">
                <svg width='24px' aria-hidden="true" focusable="false" role="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M80 352c26.467 0 48 21.533 48 48s-21.533 48-48 48-48-21.533-48-48 21.533-48 48-48m0-32c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80zm367.996 147.615c-6.448-237.848-198.06-429.164-435.61-435.61C5.609 31.821 0 37.229 0 44.007v8.006c0 6.482 5.146 11.816 11.626 11.994 220.81 6.05 398.319 183.913 404.367 404.367.178 6.48 5.512 11.626 11.994 11.626h8.007c6.778 0 12.185-5.609 12.002-12.385zm-144.245-.05c-6.347-158.132-133.207-284.97-291.316-291.316C5.643 175.976 0 181.45 0 188.247v8.005c0 6.459 5.114 11.72 11.567 11.989 141.134 5.891 254.301 119.079 260.192 260.192.269 6.453 5.531 11.567 11.989 11.567h8.005c6.798 0 12.271-5.643 11.998-12.435z"></path></svg>
              </div>
            </a>
          </li>
        </ul>
      </nav>
      
      
      <div class="logo"><a href="./"><img class="logo" id="logo" src="./assets/img/branding/MVM-logo-full.svg" alt="Refstop의 연구일지"></a></div>
      <div class="search-icon-container">
        <span class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></span>
      </div>
    </div>
  </div>
</header> <!-- End Header -->

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="[Udacity] Computer Vision (2) - Camera Calibration">

<meta itemprop="datePublished" content="2021-01-23T15:25:23+09:00">

    <div class="page-image">
      <div class="cover-image" style="background: url('./assets/img/') center no-repeat; background-size: cover;"></div>
    </div>
    <div class="wrapper">
      <div class="page-content">
        <div class="header-page">
          <h1 class="page-title">[Udacity] Computer Vision (2) - Camera Calibration</h1>
          

  <span class = "post-page-meta">
  
    <p class="page_meta">
  
  
  
    
      
      <span class="page_meta-date">
        <time datetime="2021-01-23T15:25:23+09:00">January 23, 2021</time>
      </span>
    
    
      <span class="meta-sep"></span>
    
  
  
    
    
    <span class="page_meta-readtime">
      
        9 minute read
      
    </span>
  
  
    </p>
  
  </span>

        </div>
        <aside class="sidebar side" id="sidebar">
    



<div class="tag-cloud">
    
        <ul class="tags side">
            
                <li><a href="./tag.html?tag=Udacity" class="tag side">Udacity</a></li>
            
                <li><a href="./tag.html?tag=Computer+Vision" class="tag side">Computer Vision</a></li>
            
    
        </ul>
</div>
    <div class="share-options side">
    <div class="share-hover side">
        <span class="share-button side"><svg fill="currentColor" width="25" height="25" class="side"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></span>
        <div class="share-icons side" id="sidebar-icons">
            <a class="twitter" href="https://twitter.com/intent/tweet?text=[Udacity] Computer Vision (2) - Camera Calibration&url=https://Refstop.github.io/uda-cv-cam-cali.html" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a class="facebook" href="https://facebook.com/sharer.php?u=https://Refstop.github.io/uda-cv-cam-cali.html" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a class="reddit" href="http://www.reddit.com/submit?url=https://Refstop.github.io/uda-cv-cam-cali.html&title=[Udacity] Computer Vision (2) - Camera Calibration" title="Submit to Reddit" rel="nofollow" target="_blank"><i class="fa fa-reddit" aria-hidden="true"></i></a>
            <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://Refstop.github.io/uda-cv-cam-cali.html&title=[Udacity] Computer Vision (2) - Camera Calibration&summary=&source=https://Refstop.github.io/uda-cv-cam-cali.html" title="Share on LinkedIn" rel="nofollow" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
            <a class="email" href="mailto:?subject=[Udacity] Computer Vision (2) - Camera Calibration&body=%0A%0ARead more here: https://Refstop.github.io/uda-cv-cam-cali.html" title="Share via e-mail" rel="nofollow" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
            <a class="copy-link" onclick="copyToClipboard()" title="Copy to clipboard" rel="nofollow" target="_blank"><svg width="20px" fill="currentColor" class="side" viewBox="0 0 18 18"><path d="M16.94 1.1A3.7 3.7 0 0 0 14.3 0c-1 0-1.94.39-2.64 1.1L7.43 5.3c-.91.92-2.09 3.2 0 5.27a.75.75 0 0 0 .82.16c.09-.03.17-.09.24-.15a.74.74 0 0 0 0-1.06c-1.16-1.15-.77-2.39-.02-3.16l4.24-4.22a2.2 2.2 0 0 1 1.58-.65c.6 0 1.16.23 1.58.65.86.87.86 2.29 0 3.16L12.7 8.47a.74.74 0 0 0 1.04 1.05l3.17-3.16a3.73 3.73 0 0 0 0-5.27h.03zM9.54 7.4a.74.74 0 0 0 0 1.06c1.16 1.15.76 2.39 0 3.16l-4.22 4.22c-.42.42-.99.65-1.59.65a2.23 2.23 0 0 1-1.58-3.82l3.17-3.16A.73.73 0 0 0 5.54 9a.78.78 0 0 0-.22-.52.77.77 0 0 0-1.05 0L1.1 11.64A3.72 3.72 0 0 0 3.74 18c1 0 1.94-.39 2.65-1.1l4.23-4.2c.21-.22.94-1.02 1.13-2.2.18-1.12-.2-2.15-1.12-3.07-.27-.27-.78-.27-1.06 0l-.02-.02z" clip-rule="evenodd" fill-rule="evenodd"></path></svg></a>
        </div>
    </div>
    <div class='alert' style='font-size:.6em;color:var(--accent);text-align:center;'></div>
</div>
</aside>

        
        
        <h1 id="제대로-된-이미지로-보정하기">제대로 된 이미지로 보정하기</h1>
<p>컴퓨터 비전에서 사용하는 센서 중 가장 중요한 것은 단연코 카메라입니다. 이미지 처리가 주된 내용인 만큼 카메라가 감지하는 정보는 높은 정확도를 요구합니다. 하지만 공장에서 만들어지기만 한 카메라를 바로 사용하기에는 문제가 있습니다. 내부 파라미터 조정이나 렌즈에 의한 왜곡 등이 아직 보정되지 않았기에 왜곡된 이미지가 출력될 수 있습니다. 이러한 상태의 카메라의 이미지를 보정하는 과정은 다음과 같습니다.</p>
<ol>
  <li>카메라 캘리브레이션(Camera Calibration)</li>
  <li>왜곡 교정 (Distortion Correction)</li>
  <li>원근 변환 (Perspective Transform)</li>
</ol>

<p>사실 원근 변환은 이미지를 보정하는 과정보다는 가공하는 과정에 가깝지만 이번 강의에서 소개해주는 김에 다루도록 하겠습니다.</p>

<h1 id="카메라-캘리브레이션-camera-calibration">카메라 캘리브레이션 (Camera Calibration)</h1>
<p>카메라 캘리브레이션은 간단히 말하면 3차원의 형상을 2차원으로 온전히 옮길 수 있도록 도와주는 파라미터들을 도출하는 과정입니다.
카메라 영상은 3차원 형상을 2차원으로 옮길 때 3차원 공간상의 점들을 외부 파라미터(extrinsic parameter)와 내부 파라미터(intrinsic parameter)에 곱하여 나타냅니다. 다음의 공식은 3차원 월드 좌표계 $(X, Y, Z)$의 점을 2차원 평면 좌표계 $s(x, y)$로 변환하는 공식입니다.</p>
<center>$\large{
s \begin{bmatrix}
x\\ 
y\\ 
1
\end{bmatrix}=\begin{bmatrix}
f_x &amp; skew\_cf_x &amp; c_x\\ 
0 &amp; f_y &amp; c_y\\ 
0 &amp; 0 &amp; 1
\end{bmatrix} \begin{bmatrix}
r_{11} &amp; r_{12} &amp; r_{13} &amp; t_1\\ 
r_{21} &amp; r_{22} &amp; r_{23} &amp; t_2\\ 
r_{31} &amp; r_{32} &amp; r_{33} &amp; t_3
\end{bmatrix} \begin{bmatrix}
X\\ 
Y\\ 
Z\\
1
\end{bmatrix}=A[R|t]\begin{bmatrix}
X\\ 
Y\\ 
Z\\
1
\end{bmatrix}
}$</center>
<p>이 공식을 살펴보면 우선 월드 좌표계의 점 $(X, Y, Z)$를 회전 변환하여 카메라 좌표계에서의 점으로 변환시킵니다. 그 후 카메라 내부 파라미터를 곱하여 2차원의 점으로 변환합니다. 이때 변환된 좌표계를 이미지 좌표계라고 하며, 공식에서 $s(x, y, 1)$에 해당합니다. 좌표계들을 그림으로 표현하면 다음과 같습니다.<br />
<img src="https://t1.daumcdn.net/cfile/tistory/995410365E9F957133" alt="camera coordination" width="70%" height="70%" /><br />
하지만 현재 우리가 공장에서 막 나온 카메라를 가지고 있다고 하면, 위의 공식에서 모르는 요소가 두 개 있습니다. 바로 <strong>외부 파라미터</strong>와 <strong>내부 파라미터</strong>입니다.</p>
<h2 id="1-외부-파라미터">1. 외부 파라미터</h2>
<p><img src="/assets/img/vision/extrinsic param.png" alt="extrinsic param" width="50%" height="50%" /><br />
외부 파라미터는 월드 좌표계와 카메라 좌표계 사이의 관계입니다. 쉽게 말하면 물리적인 관계입니다. 카메라가 월드 좌표계로부터 얼마만큼 병진이동했는지($[R|t]$ 중 $t$, $\begin{bmatrix}
t_1\ 
t_2\ 
t_3
\end{bmatrix}$), 얼마만큼 회전이동했는지($[R|t]$ 중 $R$, $\begin{bmatrix}
r_{11} &amp; r_{12} &amp; r_{13} \ 
r_{21} &amp; r_{22} &amp; r_{23} \ 
r_{31} &amp; r_{32} &amp; r_{33} 
\end{bmatrix}$)를 나타냅니다. 사실 이 부분은 카메라 캘리브레이션의 결과값에 도출되는 부분은 아닙니다.</p>

<h2 id="2-내부-파라미터">2. 내부 파라미터</h2>
<p>내부 파라미터는 카메라 좌표계와 이미지 좌표계 사이의 관계입니다. 내부 파라미터의 구성요소는 크게 초점거리 $(f_x, f_y)$, 주점 $(c_x, c_y)$, 그리고 비대칭 계수 $skew_c$로 이루어져 있습니다. 간단히만 설명하겠습니다. 자세한 내용은 <a href="https://darkpgmr.tistory.com/32">다음 블로그</a>를 참고해 주시기 바랍니다.</p>

<h3 id="핀홀-카메라">핀홀 카메라</h3>
<p><img src="https://t1.daumcdn.net/cfile/tistory/171E9C45510E9C1F31" alt="pinhole cam" width="50%" height="50%" /><br />
내부 파라미터의 구성요소를 설명하기에 앞서 내부 파라미터에 사용되는 이상적인 카메라 모델인 핀홀 카메라를 소개하겠습니다. 핀홀 카메라는 바늘구멍이라는 초점이 있는 카메라입니다. 이 게시글은 핀홀 카메라를 기준으로 설명됩니다.</p>

<h3 id="1-초점-거리focal-length-f_x-f_y">1. 초점 거리(focal length) $(f_x, f_y)$</h3>
<p><img src="https://t1.daumcdn.net/cfile/tistory/22504A475344768E06" alt="focal" width="70%" height="70%" /><br />
초점거리는 센서로부터 렌즈 중심까지의 거리를 의미합니다. 단위는 픽셀이며 이미지 센서의 셀의 크기에 종속된 값입니다. 만약 셀의 크기가 0.1mm이고 초점 거리가 500픽셀이라면, mm단위의 초점거리는 50mm입니다.</p>

<h3 id="2-주점principle-point-c_x-c_y">2. 주점(principle point) $(c_x, c_y)$</h3>
<p><img src="/assets/img/vision/principle.png" alt="principle" width="70%" height="70%" /><br />
주점은 카메라 렌즈의 중심으로부터 이미지 센서에 내린 수선의 발을 말합니다. 단위는 픽셀로 역시 셀의 크기에 종속되어 있습니다. 영상 중심점과 같은 값을 보이기도 하지만 카메라 조립과정 중 오차로 렌즈와 이미지 센서의 수평이 어긋나면 다른 값이 나옵니다.</p>

<h3 id="3-비대칭-계수skew-coefficient-skew_c">3. 비대칭 계수(skew coefficient) $skew_c$</h3>
<p><img src="https://t1.daumcdn.net/cfile/tistory/192F8344510E9B3A33" alt="skewc" width="45%" height="45%" /><br />
비대칭 계수는 이미지 센서의 셀 array의 y축이 기울어진 정도를 나타냅니다. 표현은 $skew_c=tan(\alpha)$로 나타냅니다. 요즘 카메라들은 skew 에러가 거의 없기 때문에 비대칭 계수는 잘 고려하지 않는다고 합니다.</p>

<h2 id="결과적으로-이렇게-사용">결과적으로 이렇게 사용</h2>
<p><img src="https://t1.daumcdn.net/cfile/tistory/99B8E53E5E9F95992F" alt="howtouseall" width="70%" height="70%" /><br />
그림은 카메라 좌표계의 $Z_C$축을 가로축으로 나타내어 사용법을 설명합니다. 카메라 좌표계 위의 한 점 $(X_C, Y_C, Z_C)$을 가지고 이미지 좌표계 위에 나타내는 방법을 보겠습니다.<br />
초점으로부터 광학축 $Z_C$를 따라 거리가 1인 평면을 정규 이미지 평면(Normalized Image Plane)이라고 합니다. 이것은 이미지 평면을 정규화시킨 것으로 실제로 존재하는 평면은 아닙니다. 카메라 좌표계의 점을 정규 이미지 평면으로 투영(projection)시켜 정규 이미지 평면상의 좌표로 변환합니다. 이 평면은 $Z_C=1$이란 특징을 갖고 있으므로 $(X_C, Y_C, Z_C)$를 $Z_C$로 나누어 $Z_C$ 좌표를 1로 만들어 줍니다. 따라서 점 $(X_C, Y_C, Z_C)$를 정규 이미지 평면에 나타낸 점은 $(\frac{X_C}{Z_C},\frac{Y_C}{Z_C},1)$입니다. 그림에서의 $(u, v)$에 해당하는 점입니다.<br />
이제 다시 이 점을 이미지 평면으로 올려 줍시다. 이미지 평면의 특징은 $Z_C=f$라는 것입니다. 따라서 정규화되었던 $Z_C$에 초점거리 $f$만 곱해 준다면 이미지 평면에 점을 올려줄 수 있습니다. 위의 공식에서 $s$란 바로 초점거리 $f$를 말하는 것입니다. 따라서 $Z_C=f$일 때 이미지 평면상의 점 좌표는 $(f_x\frac{X_C}{Z_C}, f_y\frac{Y_C}{Z_C}, f)$입니다. 이미지 평면상의 좌표기는 하지만 아직 그림에서의 $(x,y)$ 점은 아닙니다.<br />
마지막으로 이미지에서 픽셀좌표는 이미지의 중심이 아닌 좌상단 모서리를 원점으로 하기 때문에 렌즈 중심에서 셀에 내린 수선의 발인 주점을 좌표에 더하여 줍니다. 따라서 최종적인 좌표는 $(f_x\frac{X_C}{Z_C}+C_x, f_y\frac{Y_C}{Z_C}+C_y, f)$이 됩니다. 물론 이 좌표는 카메라 좌표계적 표현이고, 이미지 평면의 점은 $(f_x\frac{X_C}{Z_C}+C_x, f_y\frac{Y_C}{Z_C}+C_y)$입니다. 그림에서의 $(x,y)$에 해당하는 점입니다. 식을 정리하면 다음과 같습니다.</p>
<center>$\large{
1.\;\;(X_C, Y_C, Z_C)\;\;\xrightarrow[정규화]{}\;\;(\frac{X_C}{Z_C},\frac{Y_C}{Z_C},1)\;\;\;\;\;\;(u,v)=(\frac{X_C}{Z_C},\frac{Y_C}{Z_C})
}$</center>

<center>$\large{
2.\;\;(\frac{X_C}{Z_C},\frac{Y_C}{Z_C},1)\;\;\xrightarrow[이미지\;평면화]{}\;\;(f\frac{X_C}{Z_C},f\frac{Y_C}{Z_C},f)\;\;\;\;\;\;(x',y')=(f\frac{X_C}{Z_C},f\frac{Y_C}{Z_C})
}$</center>

<center>$\large{
3.\;\;(f\frac{X_C}{Z_C},f\frac{Y_C}{Z_C},f)\;\;\xrightarrow[원점을\;주점으로]{}\;\;(f\frac{X_C}{Z_C}+C_x,f\frac{Y_C}{Z_C}+C_y,f)
}$</center>

<center>$\large{
(x,y)=(f\frac{X_C}{Z_C}+C_x,f\frac{Y_C}{Z_C}+C_y)
}$</center>

<h4 id="정규화의-의미">정규화의 의미</h4>
<p>규칙이 없는 데이터에서 어떤 조건을 부여함로서 규칙을 따르는 데이터로 만드는 것을 의미합니다.</p>

<h2 id="카메라-캘리브레이션-예제">카메라 캘리브레이션 예제</h2>

<h1 id="왜곡-교정-distortion-correction">왜곡 교정 (Distortion Correction)</h1>
<p>이미지 보정의 다음 과정은 왜곡 교정입니다. 왜곡이란 카메라가 완벽한 이미지를 생성하지 못해 이미지가 휘어져 보이는 것인데, 차선 인식을 목표로 하는 우리에겐 치명적인 결함입니다. 따라서 이미지의 일부, 특히 가장자리 근처에 있는 요소가 늘어나거나 기울어질 수 있어 이를 수정해 주어야 합니다. 이미지 왜곡 해제는 차선 인식 뿐만 아니라 다른 이미지 처리에서도 가장 기본적인 단계입니다.<br />
왜곡의 종류에는 두 가지가 있습니다.</p>
<ol>
  <li>방사 왜곡 (Radial Distortion)</li>
  <li>접선 왜곡 (Tangential Distortion)</li>
</ol>

<h2 id="1-방사-왜곡-radial-distortion">1. 방사 왜곡 (Radial Distortion)</h2>
<p><img src="/assets/img/vision/radial.png" alt="radial" width="70%" height="70%" /><br />
방사 왜곡은 <strong>볼록렌즈의 굴절률에 의한 것</strong>으로 그림과 같이 왜곡 정도가 중심에서 이미지의 가장자리로 갈수록 왜곡이 심해지는 형태입니다.<br />
방사 왜곡의 수학적 모델은 다음과 같습니다.</p>
<center>$\large{
x_{corrected}=x(1+k_1r^2+k_2r^4+k_3r^6)
}$</center>
<center>$\large{
y_{corrected}=y(1+k_1r^2+k_2r^4+k_3r^6)
}$</center>

<h2 id="2-접선-왜곡-tangential-distortion">2. 접선 왜곡 (Tangential Distortion)</h2>
<p><img src="/assets/img/vision/tangential.png" alt="tangential" width="70%" height="70%" /><br />
접선 왜곡은 카메라 제조 과정에서 <strong>렌즈와 이미지 센서의 수평이 맞지 않거나 렌즈 자체의 centering이 맞지 않아서</strong> 발생합니다.<br />
접선 왜곡의 수학적 모델은 다음과 같습니다.</p>
<center>$\large{
x_{corrected}=x+[2p_1xy+p_2(r^2+2x^2)]
}$</center>
<center>$\large{
y_{corrected}=y+[p_1(r^2+2y^2)+2p_2xy]
}$</center>

<p>따라서 왜곡 교정을 위해서는 총 5개의 파라미터가 필요합니다. 이 파라미터를 왜곡 계수라고 합니다.</p>
<center>$\large{
Distortion coefficient = (k_1\;k_2\;p_1\;p_2\;k_3) 
}$</center>
<p>이 왜곡 계수는 카메라 캘리브레이션의 결과물로 도출됩니다.</p>

<h2 id="왜곡이-반영된-수학적-모델">왜곡이 반영된 수학적 모델</h2>
<p>렌즈계 왜곡이 없다고 할 때, 3차원 공간상의 한 점을 정규 이미지 평면에 나타내면 다음과 같습니다.<br />
(첨자 $n: normalized, u:undistorted$)</p>
<center>$\large{
\begin{bmatrix}
x_{n\_u} \\
y_{n\_u}
\end{bmatrix}=\begin{bmatrix}
\frac{X_C}{Z_C} \\
\frac{Y_C}{Z_C}
\end{bmatrix}
}$</center>
<p>하지만 실제로 카메라로 찍은 영상은 왜곡이 발생합니다. 왜곡의 수학적 모델을 반영된 모델은 다음과 같습니다.<br />
(첨자 $d:distorted$)</p>
<center>$\large{
\begin{bmatrix}
x_{n\_d} \\
y_{n\_d}
\end{bmatrix}=(1+k_1r^2+k_2r^4+k_3r^6)\begin{bmatrix}
x_{n\_u} \\
y_{n\_u}
\end{bmatrix}+\begin{bmatrix}
2p_1xy+p_2(r^2+2x^2) \\
p_1(r^2+2y^2)+2p_2xy
\end{bmatrix}
}$</center>
<p>단,</p>
<center>$\large{
r_u^2=x_{n\_u}^2+y_{n\_u}^2
}$</center>

<p>위 수식에서 우변의 첫번째 항은 방사 왜곡, 두번째 항은 접선 왜곡을 나타냅니다. 이 공식에서 방사 왜곡과 접선 왜곡의 수학적 모델은 왜곡을 보정하는 것이 아닌 왜곡을 반영하는 모델이라는 것을 알 수 있습니다. $r_u$는 왜곡이 없을 때의 중심, 즉 주점까지의 거리(반지름)입니다. 결국, 왜곡된 영상의 실제 영상 좌표 $(x_{p_u}, y_{p_u})$는 카메라 내부 파라미터를 반영하여 다음과 같이 구해집니다.</p>
<center>$\large{
\begin{bmatrix}
x_{p\_d} \\
y_{p\_d} \\
1
\end{bmatrix}=\begin{bmatrix}
f_x &amp; skew\_cf_x &amp; c_x\\ 
0 &amp; f_y &amp; c_y\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}\begin{bmatrix}
x_{n\_d} \\
y_{n\_d} \\
1
\end{bmatrix}
}$</center>
<p>즉,</p>
<center>$\large{
x_{p\_d}=f_x(x_{n\_d}+skew\_cy_{n\_d})+c_x
}$</center>
<center>$\large{
y_{p\_d}=f_yy_{n\_d}+c_y
}$</center>

<h2 id="왜곡의-교정-단계">왜곡의 교정 단계</h2>
<p>위의 단계에서 왜곡된 이미지의 모델을 살펴보았습니다. 이제 왜곡된 이미지로부터 교정된 이미지를 구하는 법을 살펴보겠습니다. 전체적인 방법은 교정 영상에서의 이미지를 역순의 변환을 통해 픽셀 좌표값을 왜곡된 이미지에 대응되는 픽셀 좌표에 채우는 것입니다. 다음 그림과 같습니다.
<img src="/assets/img/vision/map dist undist.png" alt="map dist undist" width="70%" height="70%" /><br />
왜곡되지 않은 이미지의 모델 역시 위의 공식을 따릅니다. 왜곡되지 않은 경우 공식은 다음과 같습니다.</p>
<center>$\large{
\begin{bmatrix}
x_{p\_u} \\
y_{p\_u} \\
1
\end{bmatrix}=\begin{bmatrix}
f_x &amp; skew\_cf_x &amp; c_x\\ 
0 &amp; f_y &amp; c_y\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}\begin{bmatrix}
x_{n\_u} \\
y_{n\_u} \\
1
\end{bmatrix}
}$</center>
<p>우리가 *이미 교정된 이미지 $\begin{bmatrix}
x_{p_u} <br />
y_{p_u} <br />
1
\end{bmatrix}$를 알고 있다고 할 때, 이 공식에 역행렬을 취하여 정규 이미지 평면의 좌표 $\begin{bmatrix}
x_{n_u} <br />
y_{n_u} <br />
1
\end{bmatrix}$로 변환합니다.</p>
<center>$\large{
\begin{bmatrix}
x_{n\_u} \\
y_{n\_u} \\
1
\end{bmatrix}=\begin{bmatrix}
f_x &amp; skew\_cf_x &amp; c_x\\ 
0 &amp; f_y &amp; c_y\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}^{-1}\begin{bmatrix}
x_{p\_u} \\
y_{p\_u} \\
1
\end{bmatrix}
}$</center>
<p>즉,</p>
<center>$\large{
x_{n\_d}=\frac{x_{p_u}-c_x}{f_x}-skew\_cy_{n\_u}
}$</center>
<center>$\large{
y_{n\_d}=\frac{y_{p_u}-c_y}{f_y}
}$</center>

<p>그 다음, $r_u^2=x_{n_u}^2+y_{n_u}^2$ 공식으로 $r_u$를 구하고 왜곡 모델을 적용하여 왜곡된 좌표 $(x_{n_d}, y_{n_d})$를 구합니다.</p>
<center>$\large{
\begin{bmatrix}
x_{n\_d} \\
y_{n\_d}
\end{bmatrix}=(1+k_1r^2+k_2r^4+k_3r^6)\begin{bmatrix}
x_{n\_u} \\
y_{n\_u}
\end{bmatrix}+\begin{bmatrix}
2p_1xy+p_2(r^2+2x^2) \\
p_1(r^2+2y^2)+2p_2xy
\end{bmatrix}
}$</center>
<p>마지막으로 $(x_{n_d}, y_{n_d})$를 다시 픽셀 좌표계로 변환하면 $(x_{n_u}, y_{n_u})$의 왜곡된 영상에서의 좌표 $(x_{p_d}, y_{p_d})$를 구할 수 있습니다.</p>
<center>$\large{
\begin{bmatrix}
x_{p\_d} \\
y_{p\_d} \\
1
\end{bmatrix}=\begin{bmatrix}
f_x &amp; skew\_cf_x &amp; c_x\\ 
0 &amp; f_y &amp; c_y\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}\begin{bmatrix}
x_{n\_d} \\
y_{n\_d} \\
1
\end{bmatrix}
}$</center>

<h2 id="왜곡-교정-예제">왜곡 교정 예제</h2>
<p>OpenCV에서는 사용자가 이런 복잡한 과정을 거칠 필요 없이 undistort라는 왜곡 교정 함수가 존재합니다. 이 함수의 파라미터에 대해서 살펴보겠습니다.</p>
<h3 id="cv2undistortimg-mtx-dist-none-mtx">cv2.undistort(img, mtx, dist, None, mtx)</h3>
<ul>
  <li>img: 왜곡이 있는 이미지</li>
  <li>mtx: 카메라 내부 파라미터</li>
  <li>dist: 왜곡 계수
위의 이론에서 사용한 요소들을 함수의 파라미터에 input합니다.</li>
</ul>

<p>저는 예제를 이용했기 때문에 카메라 캘리브레이션의 결과값이 담긴 pickle 파일을 사용하여 불러왔습니다.</p>
<pre><code class="language-{.python}">import pickle
import cv2
import numpy as np

dist_pickle = pickle.load( open( "/home/pickle 파일 경로/wide_dist_pickle.p", "rb" ) )
mtx = dist_pickle["mtx"]
dist = dist_pickle["dist"]

img = cv2.imread('/home/이미지 파일 경로/test_image2.png')
nx = 8 
ny = 6 

# 왜곡 보정 함수 실행
undist = cv2.undistort(img, mtx, dist, None, mtx)
cv2.imshow('undist', undist)
cv2.waitKey()
</code></pre>
<p>Input:<br />
<img src="/assets/img/vision/distortion.png" alt="distortion" width="70%" height="70%" /></p>

<p>Output:<br />
<img src="/assets/img/vision/undistortion.png" alt="undistortion" width="70%" height="70%" /></p>

<p>왜곡이 잘 보정된 것을 볼 수 있습니다.</p>
<h1 id="원근-변환-perspective-transform">원근 변환 (Perspective Transform)</h1>
<p>다른 각도나 방향에서 효과적으로 물체를 볼 수 있도록 이미지를 변형하는 기법입니다. 차선 인식에서 좌회전/우회전 시 방향을 틀 곳을 알아야 합니다. 컴퓨터 비전을 공부하는 우리가 알아야 할 것은 차선이 휘는 정도, 즉 차선의 곡률입니다. 하지만 우리는 카메라가 찍은 사진만으로는 차선이 휘었는지 직선인지 구분하기 어렵습니다. 다음 그림을 보면, 왼쪽 차선은 곡률이 있지만, 오른쪽 차선은 직선처럼 보입니다. 하지만 원근 변환을 통해 위에서 내려다 본 각도로 변환시키면, 곡률이 확실하게 드러납니다. 게다가 위에서 내려다보면 내 차의 현재 위치를 지도와 바로 매치시킬 수 있기 때문에 더 유용합니다. 이렇게 위에서 내려다본 형태로 사진을 가공하는 것을 조감도(Bird’s Eye View)라고 합니다.
<img src="/assets/img/vision/front and bird eye view.png" alt="front and bird eye view" width="80%" height="80%" /></p>

<p>이 조감도 모델을 만드는 원리는 네 점을 지정한 후, 그 점을 변환하여 위에서 내려다본 이미지를 생성하는 것입니다. 이러한 과정은 OpenCV의 getPerspectiveTransform 함수 내부에서 일어납니다.<br />
<img src="/assets/img/vision/perspective.png" alt="perspective" width="80%" height="80%" /></p>

<p>차선의 곡률을 계산하는 방법 중 하나는 차선에 2차 다항식을 맞추는 것입니다. 그림과 같은 방법으로 말입니다.
<img src="/assets/img/vision/bird eye view.png" alt="bird eye view" width="70%" height="70%" /><br />
하지만 이번 강의에서는 곡률은 구하지 않습니다. 다음 강의에서 구해보도록 합시다.</p>

<h2 id="원근-변환-예제">원근 변환 예제</h2>
<p>OpenCV에서는 getPerspectiveTransform 함수를 통해 원근 변환 행렬을 구합니다.</p>
<pre><code class="language-{.python}">import pickle
import cv2
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.image as mpimg

dist_pickle = pickle.load( open( "/home/pickle 파일 경로/wide_dist_pickle.p", "rb" ) )
mtx = dist_pickle["mtx"]
dist = dist_pickle["dist"]

img = cv2.imread('/home/이미지 파일 경로/test_image2.png')
nx = 8 # the number of inside corners in x
ny = 6 # the number of inside corners in y

def corners_unwarp(img, nx, ny, mtx, dist):
    undist = cv2.undistort(img, mtx, dist, None, mtx)
    gray = cv2.cvtColor(undist, cv2.COLOR_BGR2GRAY)
    ret, corners = cv2.findChessboardCorners(gray, (nx, ny), None)
    
    if ret == True:
        cv2.drawChessboardCorners(undist, (nx, ny), corners, ret)
        # corner 검출 결과를 더 잘 보기 위한 offset 설정, 상하좌우 100씩 여유를 줌.
        offset = 100 # offset for dst points
        # Grab the image shape
        img_size = (gray.shape[1], gray.shape[0])

        # src = 체스보드에서 검출된 corners의 네 끝점
        src = np.float32([corners[0], corners[nx-1], corners[-1], corners[-nx]])
        # destination point 목표 지점의 배열.
        dst = np.float32([[offset, offset], [img_size[0]-offset, offset], 
                                     [img_size[0]-offset, img_size[1]-offset], 
                                     [offset, img_size[1]-offset]])
        # 원근 변환 행렬 도출
        M = cv2.getPerspectiveTransform(src, dst)
        # 변환 행렬에 따라 이미지를 변환
        warped = cv2.warpPerspective(undist, M, img_size)
    return warped

top_down = corners_unwarp(img, nx, ny, mtx, dist)
cv2.imshow('Undistorted and Warped Image', top_down)
cv2.waitKey()
</code></pre>
<p>Input:<br />
왜곡 교정 예제의 입력과 같습니다.</p>

<p>Output:<br />
<img src="/assets/img/vision/perspectiveresult.png" alt="perspectiveresult" width="70%" height="70%" /></p>

<h1 id="질문">질문</h1>
<p>Q1. 내부 파라미터의 구성요소가 무엇인진 알겠는데, 어떻게 구하는지를 모르겠습니다.<br />
Q2. 비대칭 계수는 왜 이미지 좌표계 변환의 x에밖에 없나요?<br />
Q3. 셀의 크기는 셀의 가로인가요 세로인가요?<br />
A3. 초점거리의 $x$축, $y$축 성분에 따라 각각 가로 크기, 세로 크기로 계산합니다.<br />
Q4. 실제 렌즈에서 초점이란?<br />
Q5. 접선왜곡을 일부러 발생시키는 경우도 있다고 하는데 어디쓸려고 하는건가요?<br />
A5. 왜곡을 일부러
Q6. *교정된 이미지를 만들려고 왜곡된 이미지와 픽셀 좌표를 대응시키는 것인데 이미 교정된 이미지가 있다면 그럴 필요가 있을까요?<br />
왜곡된 이미지에서 교정된 이미지니까 반대 아닌가?</p>

<h1 id="참고-사이트">참고 사이트</h1>
<p>Udacity Self-driving car nanodegree - Camera Calibration(링크 공유 불가능)<br />
<a href="https://darkpgmr.tistory.com/32">다크 프로그래머 블로그 - 카메라 캘리브레이션 (Camera Calibration)</a><br />
<a href="https://darkpgmr.tistory.com/31">다크 프로그래머 블로그 - 카메라 왜곡보정 - 이론 및 실제</a></p>

        <aside class="sidebar inline" id="post-end">
    



<div class="tag-cloud">
    
        <ul class="tags inline">
            
                <li><a href="./tag.html?tag=Udacity" class="tag inline">Udacity</a></li>
            
                <li><a href="./tag.html?tag=Computer+Vision" class="tag inline">Computer Vision</a></li>
            
    
        </ul>
</div>
    <div class="share-options inline">
    <div class="share-hover inline">
        <span class="share-button inline"><svg fill="currentColor" width="25" height="25" class="inline"><g fill-rule="evenodd"><path d="M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"></path><path d="M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"></path></g></svg></span>
        <div class="share-icons inline" id="post-end-icons">
            <a class="twitter" href="https://twitter.com/intent/tweet?text=[Udacity] Computer Vision (2) - Camera Calibration&url=https://Refstop.github.io/uda-cv-cam-cali.html" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a class="facebook" href="https://facebook.com/sharer.php?u=https://Refstop.github.io/uda-cv-cam-cali.html" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a class="reddit" href="http://www.reddit.com/submit?url=https://Refstop.github.io/uda-cv-cam-cali.html&title=[Udacity] Computer Vision (2) - Camera Calibration" title="Submit to Reddit" rel="nofollow" target="_blank"><i class="fa fa-reddit" aria-hidden="true"></i></a>
            <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://Refstop.github.io/uda-cv-cam-cali.html&title=[Udacity] Computer Vision (2) - Camera Calibration&summary=&source=https://Refstop.github.io/uda-cv-cam-cali.html" title="Share on LinkedIn" rel="nofollow" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
            <a class="email" href="mailto:?subject=[Udacity] Computer Vision (2) - Camera Calibration&body=%0A%0ARead more here: https://Refstop.github.io/uda-cv-cam-cali.html" title="Share via e-mail" rel="nofollow" target="_blank"><i class="fa fa-envelope" aria-hidden="true"></i></a>
            <a class="copy-link" onclick="copyToClipboard()" title="Copy to clipboard" rel="nofollow" target="_blank"><svg width="20px" fill="currentColor" class="inline" viewBox="0 0 18 18"><path d="M16.94 1.1A3.7 3.7 0 0 0 14.3 0c-1 0-1.94.39-2.64 1.1L7.43 5.3c-.91.92-2.09 3.2 0 5.27a.75.75 0 0 0 .82.16c.09-.03.17-.09.24-.15a.74.74 0 0 0 0-1.06c-1.16-1.15-.77-2.39-.02-3.16l4.24-4.22a2.2 2.2 0 0 1 1.58-.65c.6 0 1.16.23 1.58.65.86.87.86 2.29 0 3.16L12.7 8.47a.74.74 0 0 0 1.04 1.05l3.17-3.16a3.73 3.73 0 0 0 0-5.27h.03zM9.54 7.4a.74.74 0 0 0 0 1.06c1.16 1.15.76 2.39 0 3.16l-4.22 4.22c-.42.42-.99.65-1.59.65a2.23 2.23 0 0 1-1.58-3.82l3.17-3.16A.73.73 0 0 0 5.54 9a.78.78 0 0 0-.22-.52.77.77 0 0 0-1.05 0L1.1 11.64A3.72 3.72 0 0 0 3.74 18c1 0 1.94-.39 2.65-1.1l4.23-4.2c.21-.22.94-1.02 1.13-2.2.18-1.12-.2-2.15-1.12-3.07-.27-.27-.78-.27-1.06 0l-.02-.02z" clip-rule="evenodd" fill-rule="evenodd"></path></svg></a>
        </div>
    </div>
    <div class='alert' style='font-size:.6em;color:var(--accent);text-align:center;'></div>
</div>
</aside>

        <div class="separator"></div>
        



<section class="author-box">
  <div class="narrow-column">
    <a href='https://Refstop.github.io'><img src="./assets/img/profile.jpg" alt="Refstop" class="author-img"></a>
    <ul class="contact-icons">
      
      <li class="twitter"><a class="twitter" href="https://twitter.com/@MvmThe" target="_blank"><i class="fa fa-twitter"></i></a></li>
      
      
      <li class="linkedin"><a class="linkedin" href="https://in.linkedin.com/in/amaynez" target="_blank"><i class="fa fa-linkedin"></i></a></li>
      
      
      <li class="github"><a class="github" href="http://github.com/Refstop" target="_blank"><i class="fa fa-github"></i></a></li>
      
      
      <li class="email"><a class="email" href="mailto:bhbhchoi@yu.ac.kr"><i class="fa fa-envelope-o"></i></a></li>
      
    </ul>
  </div>
  <div class="author-desc">
    <h3>Refstop</h3>
    <p>Engineer, industry executive, research enthusiast. Avid learner with diverse interests in coding, machine learning, artificial intelligence and reinforcement learning. 17+ years of experience working in multinational corporations.</p>
  </div>
</section>

        



<div class="recent-box">
  <h2 class="page-subtitle">Recent posts</h2>
  <div class="recent-list">
    
      
        <div class="recent-item">
          
          

          <a href="./kf-ekf.html" class="recent-item-img" style="background: url('./assets/img//deeplearning/lenet.png') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>Kalman Filter와 EKF(1) - 선형 KF와 EKF</span>
              

  <span class = "recent-item-meta">
  
  
  
  
  
  </span>

            </div>
          </a>
        </div>
      
    
      
        <div class="recent-item">
          
          

          <a href="./uda-lenet.html" class="recent-item-img" style="background: url('./assets/img//deeplearning/lenet.png') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>[Udacity] Deep Learning (7) - CNN 구성과 LeNet-5</span>
              

  <span class = "recent-item-meta">
  
  
  
  
    
    
    <p class="page_meta-readtime">
      
        4 minute read
      
    </p>
  
  
  </span>

            </div>
          </a>
        </div>
      
    
      
        <div class="recent-item">
          
          

          <a href="./uda-cnn.html" class="recent-item-img" style="background: url('./assets/img//deeplearning/cnn.png') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>[Udacity] Deep Learning (6) - Convolutional Nerual Network</span>
              

  <span class = "recent-item-meta">
  
  
  
  
    
    
    <p class="page_meta-readtime">
      
        4 minute read
      
    </p>
  
  
  </span>

            </div>
          </a>
        </div>
      
    
      
        <div class="recent-item">
          
          

          <a href="./i2n-signal.html" class="recent-item-img" style="background: url('./assets/img/posts/20210324/starting_adventure.jpg') center no-repeat; background-size: cover;">
            <div class="recent-item-title">
              <span>Indoor 2D Navigation - 개요 & 좌표범위내 신호 출력 노드</span>
              

  <span class = "recent-item-meta">
  
  
  
  
    
    
    <p class="page_meta-readtime">
      
        2 minute read
      
    </p>
  
  
  </span>

            </div>
          </a>
        </div>
      
    
  </div>
</div> <!-- End Recent-Box -->

        <div class="newsletter" id="mc_embed_signup">
  <h2 class="page-subtitle">Newsletter</h2>
  <div class="form-container">
    <p>Subscribe here to get our latest updates</p>
    <form action="https://github.us1.list-manage.com/subscribe/post?u=8ece198b3eb260e6838461a60&amp;id=397d90b5f4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <label class="screen-reader-text" for="mce-EMAIL">Email Address</label>
      <div class="newsletter-box" id="mc_embed_signup_scroll">
        <input type="email" name="EMAIL" placeholder="Email address" class="email-input" id="mce-EMAIL" required>
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe-btn" id="mc-embedded-subscribe">
      </div>
    </form>
  </div>
</div> <!-- End Newsletter -->

        
  <section class="comment-area">
    <div class="comment-wrapper">
        
            <div class="row" id="comment-curtain">
                <div class="col-lg-8 col-sm-10 mr-auto ml-auto">
                    <h2 class="page-subtitle">Comments</h2>
                    <div class="comments-trigger" onClick="toggle_comments()">
                        <i class="fa fa-comments"></i>&nbsp;&nbsp;Write a comment ...
                    </div>
                </div>
            </div>
        
      <div id="disqus_thread"></div>
          <script>
            (function() {
                var d = document, s = d.createElement('script');
                s.src = '//amaynez-github-io.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
          </script>
      <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>
  </section> <!-- End Comment Area -->


      </div>
    </div> <!-- End Wrapper -->
  </article>
  <div class="search-box">
  <div class="wrapper">
    <div class="search-grid">
      <form class="search-form">
        <div id="search-container">
          <input type="text" id="search-input" class="search" placeholder="Search">
        </div>
      </form>
      <ul id="results-container" class="results-search"></ul>
      <div class="icon-close-container">
        <span class="search-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>
    </div>
  </div>
</div>

  




<footer class="main-footer">
    <div class="footer-wrapper">
        <div class="logo-symbol">
            <a class="logo-link" title="Refstop의 연구일지" href="./">
                <svg width="45px" height="45px" class="logo-symbol" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" version="1.0" viewBox="0 0 649 649"><g fill="currentColor" stroke="none"><path d="M2938 6380 c-551 -53 -1031 -220 -1478 -514 -306 -201 -588 -470 -810 -771 -276 -374 -475 -850 -559 -1336 -64 -371 -53 -836 29 -1211 155 -712 552 -1347 1130 -1810 450 -360 1021 -589 1640 -659 58 -6 202 -12 320 -12 282 0 503 26 756 87 902 220 1680 841 2079 1661 303 622 402 1333 279 2005 -90 496 -313 984 -634 1390 -111 140 -378 404 -519 513 -456 352 -957 560 -1549 643 -126 17 -558 26 -684 14z m687 -220 c77 -11 189 -32 250 -46 127 -29 345 -94 345 -103 0 -4 -341 -188 -757 -409 l-757 -403 -41 22 c-22 13 -58 26 -79 29 l-40 5 -148 370 c-82 204 -150 377 -153 386 -10 29 325 119 570 153 169 24 174 24 430 21 183 -3 273 -8 380 -25z m-1292 -546 l157 -387 -24 -28 c-13 -16 -30 -44 -36 -64 -6 -19 -17 -35 -23 -35 -7 -1 -382 -54 -834 -119 -453 -64 -823 -115 -823 -111 0 3 43 62 95 132 269 358 584 630 980 844 90 49 321 153 341 154 6 0 81 -174 167 -386z m2026 347 l37 -20 129 -440 128 -440 -35 -39 c-20 -22 -37 -44 -39 -50 -3 -8 -290 13 -929 66 -775 65 -925 80 -928 92 -2 11 223 134 785 432 433 228 794 416 801 417 7 0 30 -8 51 -18z m204 -92 c420 -211 850 -600 1137 -1027 34 -51 60 -95 57 -98 -4 -4 -805 157 -859 172 -10 3 -18 12 -18 21 0 58 -78 133 -137 133 -18 0 -33 2 -33 5 0 3 -52 184 -116 403 -63 218 -117 405 -120 415 -3 9 -3 17 1 17 3 0 42 -19 88 -41z m-913 -894 c494 -41 904 -75 912 -75 7 -1 24 -23 36 -51 l24 -50 -169 -269 -168 -270 -44 0 c-24 0 -63 -9 -86 -21 l-42 -21 -679 402 c-373 222 -688 409 -699 416 -18 13 -18 14 -1 14 10 0 422 -34 916 -75z m-1175 18 l48 -48 -31 -225 c-18 -124 -60 -417 -94 -652 l-62 -428 -44 0 c-24 0 -51 -4 -61 -10 -16 -8 -146 87 -777 566 -418 317 -761 578 -763 580 -3 3 0 9 5 14 8 8 1633 247 1700 249 25 1 42 -9 79 -46z m915 -414 l690 -411 0 -38 0 -37 -147 -46 c-82 -26 -453 -148 -825 -271 l-676 -223 -22 30 -22 29 98 669 c82 557 101 669 114 669 8 0 31 9 50 19 19 11 38 20 43 20 4 1 318 -184 697 -410z m1959 175 c251 -53 457 -97 457 -98 9 -9 123 -247 153 -320 113 -272 189 -599 209 -901 l9 -130 -231 -273 c-224 -265 -232 -273 -264 -270 l-34 3 -418 1013 -419 1013 26 30 c15 16 33 29 41 29 8 0 220 -43 471 -96z m-593 2 c6 -5 804 -1949 802 -1952 -2 -2 -274 272 -605 609 l-600 612 13 32 c20 46 17 82 -9 128 l-23 41 170 271 171 272 40 -6 c22 -3 41 -6 41 -7z m-3341 -611 c402 -307 733 -561 737 -564 31 -26 -38 -31 -947 -65 -516 -19 -941 -33 -944 -30 -2 2 6 77 18 165 49 346 162 693 324 986 44 82 52 91 66 79 9 -7 345 -264 746 -571z m2710 -142 c17 -16 39 -32 48 -38 15 -9 13 -64 -23 -695 -22 -377 -40 -686 -40 -687 0 -2 -8 -3 -19 -3 -10 0 -30 -9 -45 -21 l-27 -21 -342 200 c-188 110 -542 317 -787 460 -245 144 -445 266 -445 273 0 8 312 116 820 285 451 150 822 272 824 273 2 1 18 -11 36 -26z m590 -425 c220 -222 500 -505 623 -629 l223 -225 -17 -31 -18 -30 -585 -82 c-322 -45 -602 -85 -621 -88 -31 -4 -37 -1 -53 27 -11 17 -34 39 -53 47 -19 9 -34 21 -34 27 -1 6 16 316 37 688 l37 678 26 9 c14 5 27 10 30 10 3 1 185 -180 405 -401z m-2587 -114 c-2 -9 -224 -178 -494 -375 l-492 -359 -38 16 c-26 11 -53 14 -84 10 -25 -3 -55 -7 -67 -8 -16 -2 -106 76 -362 316 -204 192 -341 327 -341 338 0 16 10 18 83 19 45 0 431 13 857 28 984 36 942 35 938 15z m59 -88 l22 -23 -104 -467 c-58 -256 -105 -468 -105 -470 0 -2 -14 -6 -32 -10 -17 -3 -47 -18 -65 -32 l-34 -26 -339 122 -338 122 -7 45 c-5 37 -3 47 12 58 10 7 229 169 488 359 258 190 472 346 475 346 3 0 15 -11 27 -24z m1013 -430 c421 -245 769 -452 775 -460 5 -8 7 -18 3 -21 -3 -4 -417 -41 -920 -84 l-913 -77 -16 26 c-9 15 -29 36 -45 47 l-28 21 104 465 105 465 43 7 c27 4 55 17 75 35 18 16 37 28 42 26 6 -2 354 -204 775 -450z m-2307 -276 c-7 -71 -4 -98 10 -126 l15 -30 -206 -248 -206 -248 -27 59 c-140 314 -228 733 -229 1086 l0 138 323 -303 c270 -254 322 -307 320 -328z m5277 366 c-17 -270 -58 -489 -135 -721 -38 -117 -134 -350 -140 -343 -1 2 -35 117 -75 256 l-72 253 26 25 c51 52 58 134 15 189 -21 26 -21 26 -2 48 11 12 102 120 203 240 100 120 184 216 186 214 2 -2 -1 -74 -6 -161z m-642 -487 l21 -41 -456 -782 c-251 -429 -461 -787 -467 -794 -9 -9 -19 -10 -42 -2 l-29 10 -174 676 -174 675 35 37 c20 20 40 51 45 67 l10 30 584 82 c321 44 594 82 605 82 16 1 27 -10 42 -40z m-4015 -145 c301 -109 327 -120 327 -142 0 -12 7 -39 15 -58 l15 -36 -411 -469 c-226 -259 -413 -468 -415 -466 -2 2 1 219 6 483 5 263 10 538 10 610 l0 132 29 12 c16 6 39 23 52 36 13 14 28 23 34 21 5 -2 157 -57 338 -123z m-517 -413 c-3 -262 -9 -527 -12 -589 -8 -134 -2 -135 -120 20 -93 121 -192 278 -272 428 l-61 115 215 257 c181 216 218 255 235 251 l22 -6 -7 -476z m4695 460 c3 -3 43 -133 88 -289 l82 -282 -62 -108 c-75 -130 -175 -278 -265 -392 -140 -176 -514 -528 -595 -558 -13 -5 -72 -13 -130 -17 l-105 -7 -16 40 -16 40 462 796 461 796 45 -6 c25 -4 48 -9 51 -13z m-1736 -69 c-6 -5 -361 -192 -790 -417 -429 -224 -806 -422 -838 -439 -52 -28 -59 -29 -70 -15 -17 22 -78 59 -99 59 -19 0 -16 -14 -68 300 -29 169 -38 246 -30 248 27 9 62 50 74 87 11 32 19 41 43 44 67 8 1683 139 1733 140 30 0 50 -3 45 -7z m90 -62 c10 -11 38 -26 62 -31 38 -10 44 -16 52 -48 90 -346 333 -1280 337 -1292 3 -11 -7 -23 -29 -36 -19 -11 -42 -38 -53 -60 l-19 -40 -1050 297 c-859 244 -1050 301 -1050 315 0 12 239 141 860 465 473 247 863 449 866 449 3 1 14 -8 24 -19z m-2076 -210 c13 0 21 -9 25 -27 10 -47 86 -497 86 -508 0 -5 -13 -19 -29 -29 -35 -24 -57 -59 -66 -108 -4 -22 -14 -39 -24 -42 -143 -41 -861 -236 -870 -236 -7 0 -11 5 -9 11 2 6 190 224 418 484 349 399 416 472 431 464 10 -5 27 -9 38 -9z m1376 -1065 c741 -208 1053 -300 1060 -312 6 -9 24 -32 41 -52 l31 -35 -30 -68 c-34 -77 -25 -71 -205 -139 -310 -116 -653 -180 -984 -183 -97 0 -178 1 -181 4 -89 106 -817 1053 -817 1063 0 18 9 27 23 21 7 -2 485 -137 1062 -299z m-1319 264 c31 -35 81 -51 134 -44 l46 6 380 -487 c208 -268 385 -496 392 -506 13 -17 10 -18 -45 -12 -640 65 -1267 346 -1732 776 l-61 57 42 12 c271 74 805 218 814 218 6 1 19 -9 30 -20z m2814 -563 c0 -5 -223 -138 -278 -165 -24 -13 -46 -20 -49 -18 -2 3 3 19 11 36 12 22 27 33 59 42 27 7 56 26 81 52 35 37 44 41 105 47 36 4 67 8 69 9 1 0 2 -1 2 -3z" transform="translate(0.000000,644.000000) scale(0.100000,-0.100000)"/></g></svg>
            </a>
        </div>
        <div class="copyright">
          <p>2021 &copy; Refstop</p>
        </div>
        <div class="footer-nav">
            <div>
                <a href="./archive.html">
                    Posts
                </a>
            </div>
            <div>
                <a href="./tags.html">
                    Tags
                </a>
            </div>
            <div>
                <a href="./about.html">
                    About
                </a>
            </div>
        </div>
    </div>
</footer> <!-- End Footer -->

</div>

    <div class="top" title="Top">
      <svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="angle-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512" class="svg-inline--fa fa-angle-up fa-w-8 fa-2x"><path fill="currentColor" d="M136.5 185.1l116 117.8c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L128 224.7 27.6 326.9c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17l116-117.8c4.7-4.6 12.3-4.6 17 .1z" class=""></path></svg>
    </div>
    




<!-- JS -->








<script>
(function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var logo = document.getElementById('logo');
    var nightModeOption = ('manual' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
    storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
    var data = storage.getItem('theme');
    try {
        data = JSON.parse(data ? data : '');
    } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
    }
    return data;
    }

    function handleThemeToggle(nightShift) {
    themeData.nightShift = nightShift;
    saveThemeData(themeData);
    html.dataset.theme = nightShift ? 'dark' : 'light';
    if (nightShift) {
        logo.setAttribute("src", "./assets/img/branding/MVM-logo-full-dark.svg");
    } else {
        logo.setAttribute("src", "./assets/img/branding/MVM-logo-full.svg");
    }
    setTimeout(function() {
        sw.checked = nightShift ? true : false;
    }, 50);
    }

    function autoThemeToggle() {
    // Next time point of theme toggle
    var now = new Date();
    var toggleAt = new Date();
    var hours = now.getHours();
    var nightShift = hours >= 19 || hours <=7;

    if (nightShift) {
        if (hours > 7) {
        toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
    } else {
        toggleAt.setHours(19);
    }

    toggleAt.setMinutes(0);
    toggleAt.setSeconds(0);
    toggleAt.setMilliseconds(0)

    var delay = toggleAt.getTime() - now.getTime();

    // auto toggle theme mode
    setTimeout(function() {
        handleThemeToggle(!nightShift);
    }, delay);

    return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
    };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
    handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
    var data = autoThemeToggle();

    // Toggle theme by local setting
    if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
    } else {
        handleThemeToggle(themeData.nightShift);
    }
    } else if (nightModeOption == 'manual') {
    handleThemeToggle(themeData.nightShift);
    } else {
    var nightShift = themeData.nightShift;
    if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
    }
    handleThemeToggle(nightShift);
    }
})();
</script>

<script src="./assets/js/jekyll-search.js"></script>
<script src="./assets/js/jquery-3.6.0.min.js"></script>


  <script>
    function toggle_comments(){
        document.getElementById('comment-curtain').classList.toggle('hide')
        document.getElementById('disqus_thread').classList.toggle('show')
    }

    function copyToClipboard() {
      navigator.clipboard.writeText('https://Refstop.github.io/uda-cv-cam-cali.html').then(function() {
      alerts = document.getElementsByClassName('alert')
      for (i=0; i < alerts.length; i++){
        alerts[i].innerHTML='\u00ABlink copied\u00BB';
        setTimeout((function(i){ return function(){alerts[i].innerHTML='';}})(i), 1600 );
      };
      }, function() {
        prompt("Unable to copy, please use this link:", "https://Refstop.github.io/uda-cv-cam-cali.html");
      });
    }

    $(function () {
      if (document.getElementById('comment-curtain') == null){
        document.getElementById('disqus_thread').classList.toggle('show')
      }

      var tweetTags = document.getElementsByTagName("tweet");

      if (tweetTags != null){
        for (i=0; i<tweetTags.length; i++){
          tweetA = document.createElement("a")
          tweetA.href = 'https://twitter.com/share?text='
                       + encodeURIComponent(tweetTags[i].textContent)
                       + '&via=MvmThe&url='
                       + window.location.href;
          tweetA.target = "_blank";
          tweetA.className = 'twitter';
          tweetSpanText = document.createElement('span');
          tweetSpanText.className = 'tweetText';
          tweetSpanText.appendChild(document.createTextNode(tweetTags[i].textContent));
          tweetSpanIcon = document.createElement('span');
          tweetSpanIcon.className = 'tweetIcon';
          tweetSpanIcon.appendChild(document.createTextNode("click to tweet"));
          tweetI = document.createElement("i");
          tweetI.className = 'fa fa-twitter';
          tweetSpanIcon.appendChild(tweetI);
          tweetA.appendChild(tweetSpanText);
          tweetA.appendChild(tweetSpanIcon);
          tweetTags[i].textContent = "";
          tweetTags[i].appendChild(tweetA);
        }
      }

    });

  </script>
  <!-- Mailchimp linking -->
  <script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/8ece198b3eb260e6838461a60/d20d9fb9aad962399025da52e.js");</script>





  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "CommonHTML": { linebreaks: { automatic: true } }
    });
  </script>
  <script src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<script src="./assets/js/main.js"></script>
<script>
  SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('results-container'),
      json: './search.json',
      searchResultTemplate: '<li><a href="{url}" title="{description}">{title}</a><p>{description}</p></li>',
      noResultsText: 'No results found',
      fuzzy: false,
      exclude: ['Welcome']
    });
</script>




    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R8SZS2YBZK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R8SZS2YBZK');
</script>
  </body>
</html>
